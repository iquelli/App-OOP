classDiagram

    class Command~Receiver~ {
        -_last : boolean
        -_title : String
        #_receiver : Receiver
        #_valid : Predicate~Receiver~
        -_form : Form
        #_display : Display
        
        +Command(last : boolean, title : String)
        +Command(last : boolean, title : String, receiver: Receiver)
        +Command(last : boolean, title : String, receiver: Receiver, valid : Predicate~Receiver~)
        +Command(title : String, receiver : Receiver)
        +Command(title : String, receiver : Receiver, valid : Predicate~Receiver~)
        +title() String
        +isLast() boolean
        +isValid() boolean
        +addBooleanField(key : String, prompt : String) void
        +addRealField(key : String, prompt : String) void
        +addIntegerField(key : String, prompt : String) void
        +addStringField(key : String, prompt : String) void
        +addOptionField(key : String, prompt : String, options : String...) void
        +booleanField(key : String) boolean
        +realField(key : String) Double
        +integerField(key : String) Integer
        +stringField(key : String) String
        +optionField(key : String) String
        +performCommand() void
        #execute()* void 
    }

    Exception <.. CommandException : extends

    class CommandException {
        -serialVersionUID long $

        +CommandException(message : String)
        +CommandException(message : String, throwable : Throwable)
        +toString() String
    }

    DoOpenMenu <.. Command~Menu~ : extends

    class DoOpenMenu {
        
        +DoOpenMenu(label : String, receiver : Menu)
        #execute() void
    }


    class Menu {
        -_ui : Dialog
        -_title : String
        -_commands : Command~?~[]

        +Menu(ui : Dialog, title : String, commands : Command~?~...)
        +Menu(title : String, commands : Command~?~...)
        +title() String
        +size() int
        +entry(n : int) Command~?~
        +entries() Command~?~[]
        +open() void
    }

    class Message {
        -operationFailed(error : String)$ String
    }

    <<interface>> Message